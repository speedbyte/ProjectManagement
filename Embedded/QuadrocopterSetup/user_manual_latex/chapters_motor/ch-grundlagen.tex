\chapter{Grundlagen}
\label{sec:grundl}

\subsubsection{Motoren}
Bei den Motoren handelt es sich um über Treiber "BL-Ctrl V1.2" gesteuerte Brushless DC Motoren "Robbe ROXXY BL-Outrunner 2824-34". Die Ansteuerung des Treibers erfolgt über den I2C Bus. An den Treiber werden 2 Byte Daten gesendet:
\begin{itemize}
	\item die I2C Adresse des gewünschten Motors
	\item den PWM-Wert ( kleiner Wert langsam drehen, hoher Wert schnelles drehen)
\end{itemize} 

Der Treiber behält die Werte 10 msec lang und verliert diese anschließend. Die Werte müssen also zyklisch gesendet werden.

Die Anzahl und Ordnung der Motoren ist je nach Typ des Helikopters unterschiedlich. Es gibt vier- oder acht Motorvarianten welche verschiedene Grundaufbauten haben können ( + oder x).

Der Code soll so allgemein gehalten werden, dass er für jeden dieser Typen verwendet werden kann. In der main.h wird mittels Definition angegeben für welchen Helikopter das Programm definiert werden soll. In der \emph{/hal/MOTOR/MOTOR.h} sind helikopterspezifische Daten abgelegt, darunter die I2C-Adressen jedes Motors, die Anzahl der Motoren, die min-Werte und max-Werte des PWM-Signales.

\subsubsection{Adafriut Ultimate GPS PI HAT\cite{doc:gpsHat}}
Dieses Modul wird direkt auf das PI aufgesteckt und leitet alle Pins bis auf die UART Pins weiter. Folgende Pins werden für das Bord benötigt und können nicht mehr verwendet werden:

\begin{table}[H]
	 \centering
	\begin{tabular}{|p{3cm}|p{11cm}| p{0.7cm} |}
		\hline 
		Pin &  Verwendung & Fest\footnotetext{Beschaltung kann nicht geändert werden} \\ 
		\hline 
		UART TXD ; UART RXD & Die einzige serielle Schnittstelle muss verwendet werden um mit dem GPS-Modul zu kommunizieren \\
		\hline 
		GPIO \#4 &  Kann bei Bedarf verwendet werden, falls die Zeitsynchronisation mit dem Raspberry nicht benötigt wird \\
		\hline
		EEDATA ;  EECLK & Werden für die Verbindung mit dem EEPROM benötigt, derzeit noch nicht vom Raspberry verwendet  \\
		\hline
	\end{tabular}
	\caption{Ultimate GPS Pins}
\end{table}

Dieses Modul liefert das GPS-Modul \textit{FGPMMOPA6H}(\href{https://www.adafruit.com/datasheets/GlobalTop-FGPMMOPA6H-Datasheet-V0A.pdf}{Datasheet}). Das Modul bietet Platz für eine Batteriezelle, für eine Real-Time-Clock und Prototypen Platz, um weitere Bauteile mittels Löten hinzuzufügen. 

\subsubsection{ADS1015 12-Bit ADC\cite{doc:gpsADC}}

Hierbei handelt es sich um einen hochauflösenden \href{https://www.adafruit.com/datasheets/ads1015.pdf}{12bit Analog-Digital-Konverter}. Der Konverter kann bis zu 3300 Umwandlungen in der Sekunde berechnen und besitzt eine I2C-Schnittstelle. Die Standardadresse des Bausteines ist die 7bit-Adresse 0x47. Diese Adresse kann durch die Verbindung folgender Pins mit dem \emph{ADDR-Pin} bei Bedarf angepasst werden: 
	
\begin{table}[H]
	\centering
	\begin{tabular}{|p{4cm}|p{4cm}| p{4cm} |}
		\hline 
		Adresse &  Pin 1 & ADDR\\ 
		\hline 
		0x48 &  GND &ADDR\\ 
		\hline 
		0x49 &  VDD & ADDR\\ 
		\hline 
		0x4A &  SDA & ADDR\\ 
		\hline 
		0x4B &  SCL & ADDR\\ 
		\hline 
	\end{tabular}
	\caption{ADC 12 Bit I2C Adress Manipulation}
\end{table}

Dieser ADC liefert folgende zwei verschiedene Betriebsmodi, welche über die Anschlüsse \emph{A0} bis \emph{A3} verwendet werden:


\begin{itemize}
	\item \emph{Single Ended}: berechnet den ADC der Spannung zwischen jedem der \emph{Ax-Pins} und Ground. Hiermit ist nur das Messen von positiven Spannungen möglich. Effektiv verliert man dadurch ein Bit der Auflösung. Der Modus bietet doppelt so viele Inputs.
	\item \emph{Differential}: berechnet den ADC der Spannung zwischen \emph{A0} \& \emph{A1} und \emph{A2} \& \emph{A3}. Der Modus liefert weniger rauschanfällige Signale.
\end{itemize}


Eine Spannung über 5V darf nicht angelegt werden, da diese das Modul zerstören würde.

\subsubsection{Pololu AltIMU-10 v4\cite{doc:imu}}

Dieses Modul besteht aus drei IC´s. Sie beinhalten die folgenden Funktionen:

\begin{table}[H]
	\centering
	\begin{tabular}{|p{4cm}|p{3cm}|p{4cm}|p{3.5cm}|}
	\hline
	 Funktion & IC & Default I2C Adresse  & Manipulate I2C  \\
	 \hline
	 Beschleunigungsmesser \newline  Magnetometer & \href{https://www.pololu.com/file/download/LSM303D.pdf?file_id=0J703}{LSM303D}  & 0x1D & 0x1E\\
	  \hline
	   Gyrometer &
	  \href{https://www.pololu.com/file/download/L3GD20H.pdf?file_id=0J731}{L3GD20H}& 0x6B& 0x6A \\
	  \hline
	 Barometer& \href{https://www.pololu.com/file/download/LPS25H.pdf?file_id=0J761}{LPS25H }& 0x5D & 0x5C \\
	 \hline 
	\end{tabular}
	\caption{IMU ICs}
\end{table}

Auch dieser Baustein verwendet zur Konfiguration und Kommunikation den I2C-Bus (7bit Adresse). Jeder dieser ICs besitzt eine eigene Adresse, die sich ebenfalls manipulieren lässt, indem man den Pin \emph{SA0} auf \emph{GND} zieht.

\subsubsection{LIDAR-Lite v2\cite{doc:lidar}}

Dieser Lasersensor besitzt eine Reichweite bis zu $ 40 m$ mit einer Genauigkeit von $  \pm 0,025$ , eine Verzögerung von 0,02 Sekunden und kann bis zu $500$ Messwerte pro Sekunde liefern. Der I2C-Bus kann mit $100kbits/s$ oder $400kbits/s$ betrieben werden. Eine eigene Adressierung ist möglich. Als Standard-I2C Adresse ist die 0x62 festgelegt. Falls mehrere LIDAR Light v2 Sensoren an einem I2C-Bus hängen ist dies die Broadcast-Adresse.

