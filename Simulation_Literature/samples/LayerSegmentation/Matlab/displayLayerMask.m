% function to display layer mask
function Im= displayLayerMask(layer)

colors = [...
    1.0000         0         0;...
    1.0000    0.3750         0;...
    1.0000    0.7500         0;...
    0.8750    1.0000         0;...
    0.5000    1.0000         0;...
    0.1250    1.0000         0;...
         0    1.0000    0.2500;...
         0    1.0000    0.6250;...
         0    1.0000    1.0000;...
         0    0.6250    1.0000;...
         0    0.2500    1.0000;...
    0.1250         0    1.0000;...
    0.5000         0    1.0000;...
    0.8750         0    1.0000;...
    1.0000         0    0.7500];
[height,width]=size(layer(1).mask);

Im=zeros(height,width,3);

for i=length(layer):-1:1
    Im=Im.*repmat((1-layer(i).mask),[1 1 3])+color2Im(colors(i,:),height,width).*repmat(layer(i).mask,[1 1 3]);
end

function im = color2Im(color,height,width)
im = ones(height,width,3);
for i = 1:3
    im(:,:,i) = im(:,:,i)*color(i);
end